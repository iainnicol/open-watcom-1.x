include $(DEVDIR)/build/mif/master.mk

vpath %.c c ../pmake

ifdef BOOT
OUT_DIR = ../build/bin
else
OUT_DIR = ../build/binl
endif

INCDIRS = h $(WATCOMH) ../pmake
LIBDIRS = $(WCLIB_DIR)/$(OBJDIR)
LIBS += -lwatcom

UTILS = cdsay sweep wsplice diff comstrip
UTILS := $(foreach i,$(UTILS),$(OBJDIR)/$i)

all: $(OBJDIR) $(UTILS) $(OBJDIR)/builder
	cp $(UTILS) $(OUT_DIR)
	mv -f $(OUT_DIR)/diff $(OUT_DIR)/wdiff

$(OBJDIR)/builder: $(foreach i,sys.o sysposix.o builder.o utils.o runit.o pmake.o,$(OBJDIR)/$i)

cdsay: $(OBJDIR)/cdsay.o

sweep: $(OBJDIR)/sweep.o

wsplice: $(OBJDIR)/wsplice.o

diff: $(OBJDIR)/diff.o

comstrip: $(OBJDIR)/comstrip.o

$(OBJDIR):
	mkdir $(OBJDIR)
