INTRODUCTION

This file contains notes on the facility created for testing our wgml and 
ultimately for validating it by showing that it produces byte-wise identical 
output to that produced by wgml 4.0 when applied to the Open Watcom documents 
using devices WHELP and PS.

MIF FILES MODIFIED

The mif files have been modified in several ways:
1. The paths to the mif, doc and bld directories have been changed from relative paths 
to fixed paths, using OWROOT.
3. (Planned) The WHELP document build process is broken down into four stages: 
initial wgml pass (1a), initial whpcvt pass (1b), final wgml pass (2a), 
and final whpcvt pass (2b).
4. (Planned) The relevant mif will need to be modified to avoid the help compilers 
being applied unless all four passes (1a through 2b) are done.
5. (Planned) The correct version of our wgml will need to be selectable, while the 
correct version of wgml 4.0 continues to be selectable.

MIFTEST

Because the mif files have been modified, miftest was created to produce the Open 
Watcom documents using the modified mif files. Since actually checking for diffs 
is not yet implemented, CSDiff was used manually.

CSDiff allows entire directories to be compared, returning one of the results 
"Deleted", "Modified", "New" or "Same". If the result is "Modified", then a 
file-specific diff list can be displayed.

This has its advantages, but, even if otherwise suitable to our purpose, would 
require CSDiff to used by everyone running the tests. A better choice for 
automation can, hopefully, be found.

The testing done was quite extensive: not only were each of dos, htmlhelp, nt, os2, 
and win compared against itself, cross-comparisons were also done. Some observations 
may be helpful:
1. If the PTF files are the same for the same target, then all the files generated 
by wgml/whpcvt for that document/target are the same.
2. If these files have been used, additional files created by the help program may 
be present.
3. In any case, the makefile will be flagged as "modified".
4. Spot-checks of the differences suggest that the body of the document is the same 
in all cases: all diffs seen were at the start, where the three files generated by 
wgml (passes 1a/2a) and (presumably) modified by whpcvt (pass 1b) are then 
re-inserted on the second wgml pass (2a).
5. However, a few documents for dos may differ from the others (this needs to be 
checked out).
6. In the cross-target checks, only htmlhelp and os2 had no ptf file diffs. The 
htmlhelp directory, of course, had a lot of html files not found in the os2 directory.

PLANNED TESTS

These are intended to be used to explore the process of building the OW docs with 
wgml/whpcvt and device WHELP:

whpass1a -- generate (with wgml 4.0) the result of the first pass of wgml
whpass1b -- generate (with whpcvt) the result of the first pass of whpcvt
whpass2a -- generate (with wgml 4.0) the result of the second pass of wgml

These are intended (eventually) to validate our wgml:
pstest   -- generate both wgml 4.0 and our wgml versions with a fixed date and time
            so that, when our wgml is ready, there will be exactly zero (0) diffs
validate -- initially, generate the whelp docs with our wgml; when our wgml goes into
            use, generate them with wgml 4.0.

Note that, when our wgml goes into use, miftest will need to be altered to use our 
wgml (it currently uses wgml 4.0).

ALTERNATIVE TO MIFTEST

miftest could, in theory, be avoided by replacing the mif files in %OWROOT/docs/mif
with these versions and configuring them to do all four wgml/whcpt passes (1a, 1b, 2a,
2b) and then produce the help files when used with the production target directories.
