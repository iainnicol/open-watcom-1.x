#
# remove all lines that don't begin with 'pick'
#
set magic
g!/^ *(pick|wdpick)/d

#
# create define statements for all other lines
#
%s/^ *wdpick.*\([ \t]*([A-Z0-9_]*).*$/pick(__\1/
%s/^.*\([ \t]*([A-Z0-9_]*).*$/#define \1   (MSG_RC_BASE + ###XA323###\# )/

#
# remove any leading zeros in the constants
#
%s/###XA323###0*//

#
#include the bases header
#
execute :1\n
execute O#define MSG_RC_BASE  0\e

#
# write the file out
#
execute :w!%1\n

#
#quit
#
execute :q!\n
