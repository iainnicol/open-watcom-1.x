proj_name = f03lib

f03lib_host_cpu_086 = i86
f03lib_host_cpu_087 = i86
f03lib_host_cpu_286 = i86
f03lib_host_cpu_287 = i86
f03lib_host_cpu_386 = 386
f03lib_host_cpu_387 = 386
f03lib_host_cpu_axp = axp
f03lib_host_cpu_ppc = ppc
host_cpu = $(f03lib_host_cpu_$(processor))

f03lib_host_os_msdos   = dos
f03lib_host_os_winnt   = nt
f03lib_host_os_windows = win
f03lib_host_os_os2     = os2
f03lib_host_os_qnx     = qnx
f03lib_host_os_netware = nov
f03lib_host_os_linux   = linux
host_os = $(f03lib_host_os_$(system))

!include cproj.mif
!include deftarg.mif

!include ../../flags.mif
!include ../../objects.mif

#-------------------------------------------------------------------------------

asm_src_i86 = $(f03_dir)/cg86/rt/asm;$(f03_dir)/cg86/asm
asm_src_386 = $(f03_dir)/cg86/rt/386asm;$(f03_dir)/cg86/rt/asm;$(f03_dir)/cg86/asm
asm_src_axp = $(f03_dir)/cg86/rt/axpasm;$(f03_dir)/cg86/axpasm
asm_src_ppc = $(f03_dir)/cg86/rt/ppcasm;$(f03_dir)/cg86/ppcasm

.asm: $(asm_src_$(host_cpu))

.c: $(f03_dir)/cg86/rt/c;$(f03_dir)/cg86/c;$(f03_dir)/rt;$(f03_dir)/rt/math;$(f03_dir)/rt/ifns;$(f03_dir)/c;$(f03_dir)/rt/ufns

#-------------------------------------------------------------------------------

$(libname).lib : $(files)
    @%create $(libname).lbc
    @for %%f in ($(files)) do @%append $(libname).lbc +%%f
    $(librarian) $(lib_flags) $^@ @$(libname).lbc

.c.obj : .autodepend
    $(cc) $($[&_opts) $(c_flags) $(build_target) $($[&_postopts) $(c_dbg_flags) $(include_c_path) $[@

.asm.obj : .autodepend
    $(as) $($[&_opts) $(a_flags) $(build_target) $($[&_postopts) $(a_dbg_flags) $(include_a_path) $[@
